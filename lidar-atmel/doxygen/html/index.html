<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lidar: lidar</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">lidar
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">lidar </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="doc_driver_mainpage_intro"></a>
Introduction</h1>
<p >AVR Code is a software library containing drivers, middleware and applications for AVR microcontrollers. START, a web-based GUI, is used to generate C-code according to the user's needs.</p>
<p >In START, the user selects the device for which to generate code. Thereafter, the user selects the driver and middleware components that he wants to include in the project. As an example, the user may choose the device Tiny817, and add the USART and SPI driver. The user can use START to configure the detailed behaviour of the drivers, and configure the device's clock system and I/O pins. Finally, the user exports the project as an atzip-file, which can be opened in Studio or IAR Embedded Workbench. The project contains:</p><ul>
<li>C and assembly files that can be compiled using the GCC or IAR compilers.</li>
<li>A directory with doxygen-files documenting the drivers included in the project. The doxygen-files can be built into a HTML-document by executing the command <em>doxygen doxyfile.doxygen</em> on a computer where doxygen is installed. The file <em>doxyfile.doxygen</em> is found in the <em>doxygen/generator</em> directory in the atzip-file.</li>
<li>Example code documenting the usage of the configured drivers</li>
</ul>
<h1><a class="anchor" id="doc_driver_mainpage_driver_overview"></a>
Driver Overview</h1>
<p >After the user has selected a device to configure, he will be able to add and configure drivers and middleware available for that device. In START, drivers are grouped by functionality, such as SPI, USART or Timer. After adding desired functionality, such as SPI, the user can configure the SPI function. This includes selecting:</p>
<ul>
<li>which hardware instance to use for implementing the functionality</li>
<li>which driver to use for implementing the functionality</li>
</ul>
<p >The devices may have several SPI hardware modules, or may implement SPI functions through other hardware modules, such as USART.</p>
<p >The combination of hardware and driver is given by the notation</p>
<p >Drivers:<em>Hardware</em>:<em>Driver_name</em></p>
<p >where <em>Hardware</em> identifies the hardware the driver uses, and <em>Driver_name</em> is the name of the driver. An example: <em>Drivers:TCB:Timeout</em> is the <em>Timeout</em> driver running on an instance of timer TCB.</p>
<h1><a class="anchor" id="doc_driver_mainpage_configuring"></a>
Configuring Drivers and Middleware</h1>
<p >In general, functionality such as SPI is supported through multiple drivers. Providing multiple drivers allows the user to select the flavor best suited to his application: He may choose a simple but small SPI driver if this suits his application, or a more complex but larger SPI driver if advanced SPI functionality is needed.</p>
<p >In general, each peripheral has at least the following drivers:</p><ul>
<li>Init: Performs device initialization only, based on the configuration the user selected in START. No API functions other than init() is provided</li>
<li>Basic : Basic functionality, provides an init-function and other functions allowing the user to use basic functionality of the peripheral. The Basic drivers are intended to cover functionality commonly found on all hardware implementations, and are therefore very portable across different devices. Typical examples of basic functions for an USART is to send and receive bytes, either in polled or interrupt driven mode.</li>
</ul>
<h1><a class="anchor" id="doc_driver_mainpage_usage"></a>
Using the generated code</h1>
<p >A project exported from START contains the drivers that the user configured, along with a main.c-file that only initializes the drivers and peripherals. The user will usually have to add code to main() in main.c in order for the code to do something useful.</p>
<p >The example code in the examples directory can be used as a starting point in order to learn how to use the drivers and their API. The examples are in the form of functions that can be called directly from main().</p>
<p >The generated drivers may use interrupt requests to communicate with hardware. The user code must normally enable global interrupts (using ENABLE_INTERRUPTS()) in order for these interrupts to be serviced. The drivers usually do not enable global interrupts as part of their initialization.</p>
<h1><a class="anchor" id="doc_driver_mainpage_documentation"></a>
Documentation of Drivers and Middleware</h1>
<p >Drivers and middlewares are documented using Doxygen. Doxygen comments are embedded into the exported C-code. In addition, exported projects have a <em>doxygen</em> folder containing doxygen files with additional documentation.</p>
<p >The user must generate the doxygen documentation himself after exporting the project. This is done by going to the <em>doxygen/generator</em> directory and issuing the command <em>doxygen doxyfile.doxygen</em>. The doxygen application may need to be installed on your computer, the installer can be found on the internet.</p>
<h2><a class="anchor" id="doc_driver_mainpage_documentation_user"></a>
Documenting user code</h2>
<p >The user can use doxygen to document his own code together with the code generated by START. The file <em>doxygen/generator/doxyfile.doxygen</em> can be modified to include the user's own code in the generated documentation. Modify the tags <em>INPUT</em> and <em>FILE_PATTERNS</em> in the doxyfile to do this. Refer to the doxygen manual for more information.</p>
<h1><a class="anchor" id="doc_driver_mainpage_output"></a>
Generated Output</h1>
<p >START exports projects as an &lt;PROJECTNAME&gt;.atzip file. This is a regular zip-file which can be unzipped using standard unzip-tools. The contents of the atzip-file is of course dependent on the configuration done in START. Assume a typical project configured with PWM, SPI, TIMEOUT, TIMER and USART drivers. Unzipping the atzip-file, or opening it in one of the supported IDEs will reveal the following directory structure:</p>
<div class="fragment"><div class="line">MyProject/</div>
<div class="line">|-- atmel_start.c               *Initializes MCU, drivers and middleware*</div>
<div class="line">|-- atmel_start_config.atstart  *START-<span class="keyword">internal</span> info on configuration of the project*</div>
<div class="line">|-- AtmelStart.env_conf         *START-<span class="keyword">internal</span> info on configuration of the project*</div>
<div class="line">|-- AtmelStart.gpdsc            *START-<span class="keyword">internal</span> info on configuration of the project*</div>
<div class="line">|-- atmel_start.h               *Initializes MCU, drivers and middleware*</div>
<div class="line">|-- config</div>
<div class="line">|   `-- clock_config.h          *Definitions regarding the configured clock system*</div>
<div class="line">|-- doxygen                     *Doxygen-documentation of the project*</div>
<div class="line">|   |-- generator</div>
<div class="line">|   |   |-- doxyfile.doxygen    *Doxygen configuration information*</div>
<div class="line">|   |   `-- DoxygenLayout.xml   *Doxygen layout information*</div>
<div class="line">|   |-- mainpage.dox            *Doxygen-documentation of the project*</div>
<div class="line">|   |-- pwm.dox                 *Doxygen-documentation of the project*</div>
<div class="line">|   |-- pwm_basic.dox           *Doxygen-documentation of the project*</div>
<div class="line">|   |-- spi_basic.dox           *Doxygen-documentation of the project*</div>
<div class="line">|   |-- spi.dox                 *Doxygen-documentation of the project*</div>
<div class="line">|   |-- system.dox              *Doxygen-documentation of the project*</div>
<div class="line">|   |-- timeout.dox             *Doxygen-documentation of the project*</div>
<div class="line">|   |-- timer.dox               *Doxygen-documentation of the project*</div>
<div class="line">|   |-- usart_basic.dox         *Doxygen-documentation of the project*</div>
<div class="line">|   `-- usart.dox               *Doxygen-documentation of the project*</div>
<div class="line">|-- driver_isr.c                *Some drivers place their Interrupt Service Routines here*</div>
<div class="line">|-- examples                    *Code examples demonstrating <span class="keyword">using</span> the drivers*</div>
<div class="line">|   |-- include</div>
<div class="line">|   |   |-- adc_basic_example.h *Example <span class="keyword">using</span> basic ADC driver*</div>
<div class="line">|   |   |-- pwm_basic_example.h *Example <span class="keyword">using</span> basic PWM driver*</div>
<div class="line">|   |   |-- spi_basic_example.h *Example <span class="keyword">using</span> basic SPI driver*</div>
<div class="line">|   |   |-- timeout_example.h   *Example <span class="keyword">using</span> timeout driver*</div>
<div class="line">|   |   `-- usart_basic_example.h *Example <span class="keyword">using</span> basic USART driver*</div>
<div class="line">|   |-- src</div>
<div class="line">|   |   |-- adc_basic_example.c *Example <span class="keyword">using</span> basic ADC driver*</div>
<div class="line">|   |   |-- pwm_basic_example.c *Example <span class="keyword">using</span> basic PWM driver*</div>
<div class="line">|   |   |-- spi_basic_example.c *Example <span class="keyword">using</span> basic SPI driver*</div>
<div class="line">|   |   |-- timeout_example.c   *Example <span class="keyword">using</span> timeout driver*</div>
<div class="line">|   |   `-- usart_basic_example.c *Example <span class="keyword">using</span> basic USART driver*</div>
<div class="line">|-- include</div>
<div class="line">|   |-- atmel_start_pins.h      *API <span class="keywordflow">for</span> the I/O pins configured in START*</div>
<div class="line">|   |-- bod.h                   *API <span class="keywordflow">for</span> the BOD*</div>
<div class="line">|   |-- ccp.h                   *API <span class="keywordflow">for</span> the Configuration Change Protection*</div>
<div class="line">|   |-- clkctrl.h               *API <span class="keywordflow">for</span> the Clock Controller*</div>
<div class="line">|   |-- cpuint.h                *API <span class="keywordflow">for</span> the Interrupt Controller*</div>
<div class="line">|   |-- driver_init.h           *API <span class="keywordflow">for</span> initialization of drivers and middleware*</div>
<div class="line">|   |-- port.h                  *API <span class="keywordflow">for</span> general use of I/O ports*</div>
<div class="line">|   |-- pwm_basic.h             *API <span class="keywordflow">for</span> PWM driver*</div>
<div class="line">|   |-- rstctrl.h               *API <span class="keywordflow">for</span> Reset Controller*</div>
<div class="line">|   |-- slpctrl.h               *API <span class="keywordflow">for</span> Sleep Controller*</div>
<div class="line">|   |-- spi_basic.h             *API <span class="keywordflow">for</span> basic SPI driver*</div>
<div class="line">|   |-- system.h                *API <span class="keywordflow">for</span> general system control functions*</div>
<div class="line">|   |-- timeout.h               *API <span class="keywordflow">for</span> Timeout driver*</div>
<div class="line">|   `-- usart_basic.h           *API <span class="keywordflow">for</span> basic USART driver*</div>
<div class="line">|-- main.c                      *Main application. User adds his own code here*</div>
<div class="line">|-- src</div>
<div class="line">|   |-- bod.c                   *API <span class="keywordflow">for</span> the BOD*</div>
<div class="line">|   |-- ccp.S                   *API <span class="keywordflow">for</span> the Configuration Change Protection*</div>
<div class="line">|   |-- clkctrl.c               *API <span class="keywordflow">for</span> the Clock Controller*</div>
<div class="line">|   |-- cpuint.c                *API <span class="keywordflow">for</span> the Interrupt Controller*</div>
<div class="line">|   |-- driver_init.c           *API <span class="keywordflow">for</span> initialization of drivers and middleware*</div>
<div class="line">|   |-- pwm_basic.c             *API <span class="keywordflow">for</span> PWM driver*</div>
<div class="line">|   |-- slpctrl.c               *API <span class="keywordflow">for</span> Sleep Controller*</div>
<div class="line">|   |-- spi_basic.c             *API <span class="keywordflow">for</span> basic SPI driver*</div>
<div class="line">|   |-- timeout.c               *API <span class="keywordflow">for</span> Timeout driver*</div>
<div class="line">|   `-- usart_basic.c           *API <span class="keywordflow">for</span> basic USART driver*</div>
<div class="line">`-- utils</div>
<div class="line">    |-- assembler</div>
<div class="line">    |   |-- gas.h               *GNU Assembler specifics*</div>
<div class="line">    |   `-- iar.h               *IAR Assembler specifics*</div>
<div class="line">    |-- assembler.h             *Assembler abstraction layer and utilities*</div>
<div class="line">    |-- atomic.h                *Macros used <span class="keywordflow">for</span> atomic memory access*</div>
<div class="line">    |-- compiler.h              *Compiler abstraction layer and utilities*</div>
<div class="line">    |-- interrupt_avr8.h        *Interrupt abstraction layer and utilities*</div>
<div class="line">    |-- utils_assert.h          *Definitions <span class="keywordflow">for</span> assert*</div>
<div class="line">    `-- utils.h                 *Various macros of general use*</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
